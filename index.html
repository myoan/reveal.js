<!doctype html>
<html lang="en">
	
	<head>
		<meta charset="utf-8">
		
		<title>ET2012 Demo</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		
		<!--<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>-->
		<!--<link href='http://fonts.googleapis.com/css?family=Rosarivo' rel='stylesheet' type='text/css'>-->
		
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">
		<link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.min.css" media="all"/>
		<link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-responsive.css" media="screen"/>
		<link rel="stylesheet" type="text/css" href="css/jquery.pnotify.default.css" media="all"/>
		<link rel="stylesheet" type="text/css" href="css/jquery.pnotify.default.icons.css" media="screen"/>
		<link rel="stylesheet" type="text/css" href="css/animate.css"/>

		<!-- my css -->
		<link rel="stylesheet" type="text/css" href="css/gsn.css"/>
		<link rel="stylesheet" type="text/css" href="css/arch.css"/>
		<link rel="stylesheet" type="text/css" href="css/bpmn.css"/>
		<link rel="stylesheet" type="text/css" href="css/matrix.css"/>
		<link rel="stylesheet" type="text/css" href="css/myreveal.css"/>
		<link rel="stylesheet" type="text/css" href="css/slideshow.css"/>
		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- For Matz_viewer -->
		<link rel="stylesheet" type="text/css" href="css/matz_viewer/dcase-node.css"/>
		<link rel="stylesheet" type="text/css" href="css/matz_viewer/viewer.css"/>
		<link rel="stylesheet" type="text/css" href="css/matz_viewer/sidemenu.css"/>
		<!-- jquery -->
		<script src="js/jquery.min.js"></script>
<style>
body {
	min-height: 480px;
	margin: 0px;
}
#viewer {
	left: 0px;
	top : 0px;
	width : 100%;
	height: 100%;
}
</style>

	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<div id="title">
						<h2>サービスのD-Case</h2>
					</div>
					<p>[TODO] matz_viewer</p>
					<div id="viewer"></div>
				</section>
				<section>
				<div id="title">
					<div id="script">
						<h2>D-Script エディタ</h2>
					</div>
				</div>
				<div class="load" id="load_deos" style="position:absolute; left: 50%; top: 50%"></div>
				<form action="" method="POST">
					<textarea class="editor" name="editor" id="deos_editor">
// script_chenji.ds

import("dscript.shell");

boolean KillHeavyProcess() {
	String pid = getHeavyProcess();
	kill -9 ${pid}
}

KillHeavyProcess();
					</textarea>
					<div style="float: left;">
						<select name="ip" id="ip_select_deos">
							<option value="192.168.59.151:8080">Node 1</option>
							<option value="192.168.59.160:8080">Node 2</option>
							<option value="192.168.59.150:8080">DSE Manager</option>
						</select>
						<select name="script" id="script_select_deos">
						</select>
						<button type="button" id="exec_deos" class="btn" style="margin-bottom: 10px">実行</button>
						<button type="button" id="check_deos" class="btn btn-primary" style="margin-bottom: 10px">D-Case認証を行う</button>
					</div>
				</form>
				</section>
				<section>
					<div id="title">
						<h2>D-Scriptのリスク</h2>
					</div>
					<p>[TODO] risk check list</p>
					<!--
				  <div style="height:480px;overflow:auto;">
					<table id="risk_table_deos" class="table table-hover">
					  <thead>
						<tr>
						  <th class="span2">キーワード</th>
						  <th class="span4">サブゴール</th>
						  <th class="span5">エビデンス</th>
						  <th class="span1">無視</th>
						</tr>
					  </thead>
					  <tbody>
					  </tbody>
					</table>
				  </div>
				  <button type="button" id="secure_execution_deos" class="btn btn-primary" style="margin-top:20px">合意内容の実行</button>
				  -->
				</section>
				<section>
					<div id="title">
						<h2>D-ScriptのD-Case</h2>
					</div>
					<p>[TODO] matz_viewer</p>
				</section>
				<section>
				<div id="title">
					<div id="script">
						<h2>D-Script エディタ</h2>
						<h3>合意形成を行ったスクリプト</h3>
					</div>
				</div>
				<div class="load" id="load_deos2" style="position:absolute; left: 50%; top: 50%"></div>
				<form action="" method="POST">
					<textarea class="editor" name="editor" id="deos_editor2">
// script_deos.ds

import("dscript.shell");

boolean KillHeavyProcess() {
	String pid = getHeavyProcess();
	String procName = getProcessNameFromPid(pid);
	if(ask("プロセス ${procName} をkillしてもよろしいですか？")) {
		kill -9 ${pid}
	}
}

KillHeavyProcess();
					</textarea>
					<div style="float: left;">
						<select name="ip" id="ip_select_deos2">
							<option value="192.168.59.151:8080">Node 1</option>
							<option value="192.168.59.160:8080">Node 2</option>
							<option value="192.168.59.150:8080">DSE Manager</option>
						</select>
						<!--
						<select name="script" id="script_select_deos2">
						</select>
						-->
						<button type="button" id="exec_deos2" class="btn btn-primary" style="margin-bottom: 10px">実行</button>
						<button type="button" id="check_deos2" class="btn" style="margin-bottom: 10px">D-Case認証を行う</button>
					</div>
				</form>
				</section>
			</div>
		<footer id="footer-content"> </footer>
		<script src="js/jquery-ui-1.8.13.custom.min.js" charset="utf-8"></script>
		<script src="js/jquery.transit.js"></script>
		<script src="js/jquery.pnotify.js"></script>
		<script src="js/jquery.svg.js"></script>
		<script src="js/jquery.svganim.js"></script>
		<script src="js/jquery.slideshow.js"></script>
		<script src="js/spin.min.js"></script>
		<script src="lib/js/head.min.js"></script>
		<script src="plugin/zoom-js/zoom.js"></script>
		<script src="js/reveal.js"></script>
		<script src="js/bootstrap/bootstrap.min.js"></script>
		<script src="js/myjs/util.js"></script>
		<script src="js/myjs/config.js"></script>
		<script src="js/myjs/spinner.js"></script>
		<script src="js/myjs/notify.js"></script>
		<script src="js/myjs/fault.js"></script>
		<!-- <script src="js/myjs/arch.js"></script> -->
		<script src="js/myjs/faultMatrix.js"></script>
		<script src="js/myjs/footer.js"></script>
		<script src="js/myjs/graph.js"></script>
		<script src="js/myjs/bpmn.js"></script>
		<script src="js/myjs/gsn.js"></script>
		<script src="js/myjs/nodeviewer.js"></script>
		<script src="js/myjs/dummy.js"></script>
		<script src="js/myjs/dmng.js"></script>
		<script src="js/myjs/dcase.js"></script>
		<script src="js/myjs/demo.js"></script>
		<script src="js/myjs/slideshow.js"></script>
		<script src="js/myjs/risk_db.js"></script>

		<!-- editor -->
		<script src="js/myjs/check.js"></script>
		<script src="js/myjs/deos_editor.js"></script>
		<script src="js/myjs/editor.js"></script>
		<script src="lib/codemirror/lib/codemirror.js"></script>
		<link rel="stylesheet" href="lib/codemirror/lib/codemirror.css">
		<link rel="stylesheet" href="css/editor.css">
		<script src="lib/codemirror/mode/clike/clike.js"></script>
		<!-- matz_viewer -->
<script type="text/javascript" src="js/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="js/matz_viewer/dcaseviewer.js" charset="utf-8"></script>
<script type="text/javascript" src="js/matz_viewer/dnode.js"></script>
<script type="text/javascript" src="js/matz_viewer/dnodeview.js"></script>
<script type="text/javascript" src="js/matz_viewer/handler.js"></script>
<script type="text/javascript" src="js/matz_viewer/edit.js"></script>
<script type="text/javascript" src="js/matz_viewer/sidemenu.js"></script>
<script type="text/javascript" src="js/matz_viewer/api.js"></script>
<script type="text/javascript">

function getNodeFromServer(id) {
	var res1 = DCaseAPI.get(["Argument"]);
	//var id = res1[0].argument_id;
	//var id = "0";//FIXME
	console.log("get id=" + id);
	var res2 = DCaseAPI.get([], id);
	console.log(res2);
	var node = createNodeFromJson(res2);
	return node;
}

window.addEventListener("load",function() {
	//var node = createSampleNode();
	var id = "47";
	var node = getNodeFromServer(id);
	var opts = {
		argument_id: id,
	};
	var viewer = new DCaseViewer(document.getElementById("viewer"), node, opts);
	var menu = new SideMenu(document.body, viewer);

	// hide url bar for ipod touch
	setTimeout(function(){
		window.scrollTo(0, 0);
	}, 0);
});
</script>

<script>
	Reveal.initialize({
		controls: true,
		
		theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
		transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/linear(2d)

		// Optional libraries used to extend on reveal.js
		//dependencies: [
		//	{ src: 'js/myjs/editor.js', async: true, callback: function() { Editor_init(); } }
		//]
	});
</script>
</body>
</html>
